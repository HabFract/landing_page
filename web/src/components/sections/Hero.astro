---
// Hero section matching section1.png design
import ProductTransition from '../ui/ProductTransition';
import { TextLoop } from '../ui/TextLoop';

interface Feature {
  icon: string;
  title: string;
  description: string;
}

interface Product {
  id: string;
  name: string;
  features: Feature[];
}

interface Props {
  headline: string;
  subheadline: string;
  tagline?: string;
  cta: {
    primary: { text: string; url: string };
    secondary: { text: string; url: string };
  };
  products?: Product[];
  screenshot?: string;
  bottomTagline?: string;
  logos?: Array<{ name: string; image?: string }>;
}

const {
  headline,
  subheadline,
  tagline = 'Your engine for smarter billing and growth',
  cta,
  products = [],
  screenshot,
  bottomTagline = 'Powering revenue growth for the next generation',
  logos = [],
} = Astro.props;
---

<section class="hero">
  <div class="container">
    <div class="hero__content">
      <p class="hero__tagline">{tagline}</p>
      <h1 class="hero__headline">
        <span class="hero__headline-line">Agentic Intelligence,</span>
        <span class="hero__headline-line"><span class="hero__headline-muted">Human</span>&nbsp;<TextLoop
          client:load
          words={['Oversight', 'Connection', 'Growth']}
          className="overflow-y-clip hero__headline-accent"
          interval={4000}
        /></span>
      </h1>
      <div class="hero__ctas">
        <a href={cta.primary.url} class="hero__cta hero__cta--primary">
          {cta.primary.text}
        </a>
        <a href={cta.secondary.url} class="hero__cta hero__cta--secondary">
          {cta.secondary.text}
        </a>
      </div>
    </div>
  </div>

  <div class="hero__bottom">
    <div class="container">
      <div class="hero__bottom-grid">
        <div class="hero__bottom-left">
          {/* Product transition with features */}
          {products.length > 0 && <ProductTransition products={products} client:load />}

          {
            screenshot && (
              <div class="hero__screenshot">
                <img src={screenshot} alt="Product screenshot" />
              </div>
            )
          }
        </div>
        <div class="hero__bottom-right">
          {/* Right box - 1/3 width with overlay image */}
          <div class="hero__overlay-image">
            <img src="/mob.png" alt="Mobile overlay" />
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .hero {
    position: relative;
    background-color: white;
    background-image: url('/hero-bg.webp');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    padding-top: var(--space-4xl);
    padding-bottom: 0;
    min-height: 80vh;
    width: 100vw;
    margin-left: calc(-50vw + 50%);
  }

  @media (min-width: 2000px) {
    .hero {
      background-size: cover;
      background-position: calc(center - 30vw) bottom;
    }
  }

  .hero .container {
    max-width: var(--container-xl);
    margin: 0 auto;
    padding-left: var(--space-xl);
    padding-right: var(--space-xl);
  }

  .hero__bottom {
    position: relative;
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(255, 255, 255, 0.5) 20%,
      white 30%,
      white 100%
    );
    padding-top: var(--space-3xl);
    padding-bottom: var(--space-4xl);
    margin-top: var(--space-4xl);
  }

  .hero__bottom .container {
    padding-left: var(--space-xl);
    padding-right: var(--space-xl);
  }

  .hero__bottom-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: var(--space-2xl);
    position: relative;
  }

  .hero__bottom-left {
    /* Left box - 2/3 width */
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    background: linear-gradient(
      to bottom,
      transparent 0%,
      var(--color-bg-light) 100%
    );
    border-bottom-left-radius: var(--radius-xl);
    border-bottom-right-radius: var(--radius-xl);
    padding: var(--space-xl);
  }

  .hero__bottom-right {
    /* Right box - 1/3 width with overlay image */
    position: relative;
  }

  .hero__overlay-image {
    position: absolute;
    right: calc(33.333% - var(--space-2xl));
    top: -150%;
    height: 300%;
    width: auto;
  }

  .hero__overlay-image img {
    height: 100%;
    width: auto;
    object-fit: contain;
  }

  .hero__content {
    text-align: left;
    max-width: 700px;
    margin-bottom: var(--space-3xl);
  }

  .hero__tagline {
    color: var(--color-primary-dark);
    font-family: var(--font-heading);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-lg);
  }

  .hero__tagline::before {
    content: 'â–  ';
    color: var(--color-primary);
    margin-right: var(--space-xs);
  }

  .hero__headline {
    color: var(--color-text-dark);
    font-size: clamp(3.5rem, 5vw, 5rem);
    font-weight: var(--font-weight-bold);
    line-height: 1.2;
    margin-bottom: var(--space-xl);
    max-width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .hero__headline-line {
    white-space: nowrap;
  }

  .hero__headline-muted {
    color: var(--color-text-light);
  }

  .hero__headline :global(.overflow-y-clip) {
    overflow-y: visible;
    display: inline-block;
    vertical-align: baseline;
    min-width: 5em;
    padding-bottom: 0.1em;
  }

  .hero__headline :global(.hero__headline-accent) {
    color: #41c1ba;
    filter: saturate(0.8);
  }

  .hero__ctas {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  .hero__cta {
    padding: var(--space-md) var(--space-xl);
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base);
    letter-spacing: 0.025em;
    line-height: 1.6;
    text-decoration: none;
    transition: all var(--transition-base);
    white-space: nowrap;
  }

  .hero__cta--primary {
    background: var(--color-primary-dark);
    color: white;
  }

  .hero__cta--primary:hover {
    background: var(--color-secondary);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .hero__cta--secondary {
    background: rgba(242, 241, 236, 0.5);
    color: var(--color-primary-dark);
    border: 1px solid var(--color-primary-dark);
  }

  .hero__cta--secondary:hover {
    background: rgba(242, 241, 236, 0.8);
    border-color: var(--color-secondary);
    color: var(--color-secondary);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .hero__features {
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
    margin-bottom: 0;
    padding-top: var(--space-2xl);
  }

  .hero__feature {
    display: flex;
    gap: var(--space-md);
    align-items: flex-start;
  }

  .hero__feature-icon {
    font-size: var(--font-size-2xl);
    flex-shrink: 0;
  }

  .hero__feature-content {
    flex: 1;
  }

  .hero__feature-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-dark);
    margin-bottom: var(--space-xs);
  }

  .hero__feature-description {
    font-size: var(--font-size-sm);
    color: var(--color-text-light);
    line-height: var(--line-height-normal);
    margin: 0;
  }

  .hero__screenshot {
    margin-bottom: var(--space-3xl);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-xl);
  }

  .hero__screenshot img {
    width: 100%;
    height: auto;
    display: block;
  }

  @media (min-width: 640px) and (max-width: 1024px) {
    .hero {
      background-position: calc(center - 15vw) center;
    }

    .hero__ctas {
      flex-direction: column;
      max-width: 33vw;
    }

    .hero__cta {
      width: 100%;
      text-align: center;
      padding: var(--space-md) var(--space-xl);
    }
  }

  @media (min-width: 640px) {
    .hero .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }

    .hero__bottom .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }
  }

  @media (min-width: 768px) {
    .hero .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }

    .hero__bottom .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }
  }

  @media (min-width: 1024px) {
    .hero .container {
      padding-left: var(--space-3xl);
      padding-right: var(--space-3xl);
    }

    .hero__bottom .container {
      padding-left: var(--space-3xl);
      padding-right: var(--space-3xl);
    }
  }

  @media (min-width: 1280px) {
    .hero .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }

    .hero__bottom .container {
      padding-left: var(--space-2xl);
      padding-right: var(--space-2xl);
    }
  }

  @media (max-width: 1024px) {
    .hero {
      background-image: url('/hero-bg-mob.webp');
      background-position: top left;
      background-size: auto;
    }

    .hero__bottom {
      margin-top: var(--space-lg);
      padding-top: 0;
      padding-bottom: 0;
      background: linear-gradient(
        to bottom,
        transparent 0%,
        rgba(255, 255, 255, 1) 2.5%,
        rgba(255, 255, 255, 1) 10%,
        white 15%,
        white 100%
      );
    }

    .hero__headline {
      font-size: clamp(2.25rem, 9vw, 3rem);
      line-height: 1.2;
    }

    .hero__bottom-grid {
      grid-template-columns: 1fr;
    }

    .hero__features {
      grid-template-columns: 1fr;
      margin-bottom: var(--space-lg);
    }

    .hero__bottom-right {
      position: relative;
      width: 100%;
      margin-top: var(--space-lg);
    }

    .hero__overlay-image {
      position: relative;
      right: auto;
      top: 0;
      height: auto;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
    }

    .hero__overlay-image img {
      width: 100%;
      height: auto;
      object-fit: cover;
    }

    .hero__ctas {
      flex-direction: column;
    }

    .hero__cta {
      width: 100%;
      text-align: center;
      padding: var(--space-sm) var(--space-lg);
    }
  }
</style>
